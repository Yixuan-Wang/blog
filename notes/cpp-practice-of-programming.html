<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" href="/favicon.svg" type="image/svg+xml"><link rel="apple-touch-icon" href="/pwa-192x192.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#00aba9"><meta name="msapplication-TileColor" content="#00aba9"><meta name="theme-color" content="#ffffff"><script type="module" async="" crossorigin="" src="/assets/app.26ad1185.js"></script><style>button[data-v-6ed7d32f]{padding:.25rem;font-size:1.125rem;line-height:1.75rem;color:rgba(var(--color-accent))}#app{display:grid;grid-template-rows:auto 1fr auto;grid-template-columns:100%;margin-left:1rem;margin-right:1rem;height:100%}@media (min-width:1024px){#app{margin-left:0;margin-right:0}}*,:after,:before{box-sizing:border-box;border-width:0;border-style:solid;border-color:currentColor}html{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji"}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}h1,h2,h3{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}strong{font-weight:bolder}code,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:1em}button{font-family:inherit;font-size:100%;line-height:inherit;color:inherit;margin:0;padding:0}button{text-transform:none}button{-webkit-appearance:button;background-color:transparent;background-image:none}h1,h2,h3,hr,p,pre{margin:0}ol,ul{list-style:none;margin:0;padding:0}button{cursor:pointer}*,::after,::before{--un-rotate:0;--un-rotate-x:0;--un-rotate-y:0;--un-rotate-z:0;--un-scale-x:1;--un-scale-y:1;--un-scale-z:1;--un-skew-x:0;--un-skew-y:0;--un-translate-x:0;--un-translate-y:0;--un-translate-z:0;--un-scroll-snap-strictness:proximity;--un-border-spacing-x:0;--un-border-spacing-y:0;--un-ring-offset-shadow:0 0 rgba(0,0,0,0);--un-ring-shadow:0 0 rgba(0,0,0,0);--un-shadow:0 0 rgba(0,0,0,0);--un-ring-offset-width:0px;--un-ring-offset-color:#fff;--un-ring-width:0px;--un-ring-color:rgba(147,197,253,0.5)}[i-mdi-file=""]{--un-icon:url("data:image/svg+xml;utf8,%3Csvg preserveAspectRatio='xMidYMid meet' viewBox='0 0 24 24' display='inline-block' vertical-align='sub' width='1.25em' height='1.25em' xmlns='http://www.w3.org/2000/svg' %3E%3Cpath fill='currentColor' d='M13 9V3.5L18.5 9M6 2c-1.11 0-2 .89-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6H6Z'/%3E%3C/svg%3E");mask:var(--un-icon) no-repeat;mask-size:100% 100%;-webkit-mask:var(--un-icon) no-repeat;-webkit-mask-size:100% 100%;background-color:currentColor;display:inline-block;vertical-align:sub;width:1.25em;height:1.25em}.i-mdi-folder,[i-mdi-folder=""]{--un-icon:url("data:image/svg+xml;utf8,%3Csvg preserveAspectRatio='xMidYMid meet' viewBox='0 0 24 24' display='inline-block' vertical-align='sub' width='1.25em' height='1.25em' xmlns='http://www.w3.org/2000/svg' %3E%3Cpath fill='currentColor' d='M10 4H4c-1.11 0-2 .89-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-8l-2-2Z'/%3E%3C/svg%3E");mask:var(--un-icon) no-repeat;mask-size:100% 100%;-webkit-mask:var(--un-icon) no-repeat;-webkit-mask-size:100% 100%;background-color:currentColor;display:inline-block;vertical-align:sub;width:1.25em;height:1.25em}[i-mdi-table-large=""]{--un-icon:url("data:image/svg+xml;utf8,%3Csvg preserveAspectRatio='xMidYMid meet' viewBox='0 0 24 24' display='inline-block' vertical-align='sub' width='1.25em' height='1.25em' xmlns='http://www.w3.org/2000/svg' %3E%3Cpath fill='currentColor' d='M4 3h16a2 2 0 0 1 2 2v15a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2m0 4v3h4V7H4m6 0v3h4V7h-4m10 3V7h-4v3h4M4 12v3h4v-3H4m0 8h4v-3H4v3m6-8v3h4v-3h-4m0 8h4v-3h-4v3m10 0v-3h-4v3h4m0-8h-4v3h4v-3Z'/%3E%3C/svg%3E");mask:var(--un-icon) no-repeat;mask-size:100% 100%;-webkit-mask:var(--un-icon) no-repeat;-webkit-mask-size:100% 100%;background-color:currentColor;display:inline-block;vertical-align:sub;width:1.25em;height:1.25em}[i-mdi-text-box=""]{--un-icon:url("data:image/svg+xml;utf8,%3Csvg preserveAspectRatio='xMidYMid meet' viewBox='0 0 24 24' display='inline-block' vertical-align='sub' width='1.25em' height='1.25em' xmlns='http://www.w3.org/2000/svg' %3E%3Cpath fill='currentColor' d='M14 17H7v-2h7m3-2H7v-2h10m0-2H7V7h10m2-4H5c-1.11 0-2 .89-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2Z'/%3E%3C/svg%3E");mask:var(--un-icon) no-repeat;mask-size:100% 100%;-webkit-mask:var(--un-icon) no-repeat;-webkit-mask-size:100% 100%;background-color:currentColor;display:inline-block;vertical-align:sub;width:1.25em;height:1.25em}[btn-icon=""]:hover{color:rgba(var(--color-accent));transition-duration:.3s;transition-timing-function:cubic-bezier(0,0,.2,1)}.transition-lively,[btn-icon=""],[transition-lively=""]{transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:150ms;transition-duration:.2s;transition-timing-function:cubic-bezier(.4,0,1,1)}.transition-lively:hover,[transition-lively=""]:hover{transition-duration:.3s;transition-timing-function:cubic-bezier(0,0,.2,1)}.relative{position:relative}.my-4{margin-top:1rem;margin-bottom:1rem}.mb-8,[m~=b-8]{margin-bottom:2rem}.mt-4{margin-top:1rem}.inline-block{display:inline-block}.flex{display:flex}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.items-start{align-items:flex-start}.items-center{align-items:center}.justify-start{justify-content:flex-start}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-1{grid-gap:.25rem;gap:.25rem}.gap-2{grid-gap:.5rem;gap:.5rem}.gap-3{grid-gap:.75rem;gap:.75rem}.gap-x-1{grid-column-gap:.25rem;column-gap:.25rem}.gap-y-0\.5{grid-row-gap:.125rem;row-gap:.125rem}.rounded{border-radius:.25rem}.hover\:bg-acc:hover,[bg~=acc]{background-color:rgba(var(--color-accent))}.hover\:bg-sec:hover,[bg~="hover\:sec"]:hover{background-color:rgba(var(--color-secondary))}.p-1{padding:.25rem}.px-2{padding-left:.5rem;padding-right:.5rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.text-left{text-align:left}.font-mono,[font~=mono]{font-family:var(--font-mono)}.text-xs{font-size:.75rem;line-height:1rem}.font-bold,[font~=bold]{font-weight:700}[color~="\#00aba9"]{--un-text-opacity:1;color:rgba(0,171,169,var(--un-text-opacity))}.text-acc{color:rgba(var(--color-accent))}.hover\:text-bgd:hover,[text~=bgd]{color:rgba(var(--color-background))}.hover\:text-sec:hover,.text-sec{color:rgba(var(--color-secondary))}@media (min-width:1024px){.lg\:sticky{position:sticky}.lg\:top-4{top:1rem}}:root{--shiki-color-text:#EEEEEE;--shiki-color-background:#333333;--shiki-token-constant:#660000;--shiki-token-string:#770000;--shiki-token-comment:#880000;--shiki-token-keyword:#990000;--shiki-token-parameter:#AA0000;--shiki-token-function:#BB0000;--shiki-token-string-expression:#CC0000;--shiki-token-punctuation:#DD0000;--shiki-token-link:#EE0000}:root{--font-sans:"Noto Sans",var(--custom-font-sans, sans-serif),"SF Pro",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Avenir Next","Helvetica Neue",sans-serif;--font-serif:"Noto Serif",var(--custom-font-serif, serif),"Noto Serif","New York","Roboto Slab",Cambria,Georgia,Times,"Times New Roman",serif;--font-mono:"JetBrains Mono","SF Mono","Roboto Mono",Menlo,"Cascadia Code",Consolas,monospace}html:not(.dark){--color-accent-default:33,119,184;--color-accent:var(--accent-light-accent, var(--color-accent-default));--color-secondary-default:0,58,112;--color-secondary:var(--accent-light-secondary, var(--color-secondary-default));--color-background:245,245,245;--color-foreground:29,37,45;--color-dim:115,125,124}html{height:100%;width:100%;margin:0;padding:0;text-align:center;font-size:1rem;line-height:1.5rem;overflow-x:hidden;overflow-y:auto;overflow-y:overlay;background-color:rgba(var(--color-background));color:rgba(var(--color-foreground));font-family:var(--font-sans)}body{height:100%;margin:auto;padding:0;max-width:75ch}code,pre{font-family:var(--font-mono)}h1{font-size:1.875rem;line-height:2.25rem;font-weight:700}button{outline:2px solid transparent!important;outline-offset:2px!important}#md a{color:rgba(var(--color-accent));background-color:rgba(var(--color-accent),.125);border-radius:.25rem;padding:.125rem .5ch;transition:all .2s ease-in}#md a:hover{color:rgba(var(--color-secondary));background-color:rgba(var(--color-secondary),.25);transition:all .3s ease-out}#md em{padding-right:.25ch}#md h2,#md h3{margin:1.25em 0 .75em;font-family:var(--font-serif);font-weight:700}#md article[note]{margin:1.25em 0}#md h2{font-size:1.5em}#md h3{font-size:1.25em}#md p{margin:1em 0}#md h2:first-child,#md h3:first-child,#md p:first-child,#md pre:first-child{margin-top:0}#md h2:last-child,#md h3:last-child,#md p:last-child,#md pre:last-child{margin-bottom:0}#md hr{border:0;height:0;border-bottom:1px solid rgba(var(--color-foreground))}#md hr.talk-separator{height:1.5em;border:none;overflow:visible;text-align:center}#md hr.talk-separator:after{position:relative;content:"***";letter-spacing:.5em;background:0 0}#md ol,#md ul{margin:1em 0;padding-left:1em}#md ul{list-style:disc}#md ol{list-style:decimal}#md li{line-height:150%;margin:.25em 0}#md pre{border-radius:.25rem;padding:1em;max-width:100%;overflow:auto}#md p code{font-size:.95rem}#md code,#md pre{font-family:var(--font-mono);line-height:154%}#md code:not(pre*,a*){background-color:rgba(var(--color-dim),.25);border-radius:.25rem;padding:.125rem .5ch}#md pre{margin:1em 0}@media (min-width:1024px){#toc{position:absolute;left:100%;padding:0 .5em;width:calc((100vw - 100%)/ 2 - 2em);margin-left:1em;max-height:50vh;overflow-y:auto}}</style><link rel="preload" href="/assets/app.bdde22dc.css" as="style"><link rel="modulepreload" crossorigin="" href="/assets/cpp-practice-of-programming.0d8c0068.js"><link rel="modulepreload" crossorigin="" href="/assets/TheArticle.561e63f4.js"><link rel="preload" href="/assets/TheArticle.080d4a8a.css" as="style"><title>ç¨‹è®¾ C++ ç¬”è®° | Pak</title><meta name="description" content="ç¨‹è®¾è¯¾çš„ C++ ç¬”è®°ã€‚ä¸ŠåŠå­¦æœŸæ˜¯è¯­æ³•åŠ STLï¼Œä¸‹åŠå­¦æœŸæ˜¯ç®—æ³•åŸºç¡€ã€‚"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous"><meta name="head:count" content="2"></head><body><div id="app" data-server-rendered="true"><!--[--><header class="flex justify-between items-center my-4 gap-2" data-v-6ed7d32f=""><nav class="inline-block px-2 py-1 rounded transition-lively" text="bgd" bg="acc hover:sec" font="mono bold" data-v-6ed7d32f=""><a href="/" class="" data-v-6ed7d32f="">pÎ±k</a></nav><nav class="flex justify-between items-center gap-3" data-v-6ed7d32f=""><button title="Archive" transition-lively="" class="hover:text-sec" data-v-6ed7d32f=""><a href="/archive" class="" title="Archive" data-v-6ed7d32f=""><div i-mdi-text-box="" data-v-6ed7d32f=""></div></a></button><button title="Posts" transition-lively="" class="hover:text-sec" data-v-6ed7d32f=""><a href="/posts" class="" title="Posts" data-v-6ed7d32f=""><div i-mdi-file="" data-v-6ed7d32f=""></div></a></button><button title="Sheets" transition-lively="" class="hover:text-sec" data-v-6ed7d32f=""><a href="/sheets" class="" title="Sheets" data-v-6ed7d32f=""><div i-mdi-table-large="" data-v-6ed7d32f=""></div></a></button><button title="Notes" transition-lively="" class="hover:text-sec" data-v-6ed7d32f=""><a href="/notes" class="" title="Notes" data-v-6ed7d32f=""><div i-mdi-folder="" data-v-6ed7d32f=""></div></a></button></nav></header><main class="text-left"><main class="mb-8"><article class="text-left relative"><header class="flex flex-col justify-start items-start gap-2 mt-4 mb-8"><h1>ç¨‹è®¾ C++ ç¬”è®°</h1><div class="flex flex-wrap gap-x-1 gap-y-0.5 justify-start items-center"><span class="flex justify-center"><div btn-icon=""><a href="/notes" class="" title="All notes"><div class="i-mdi-folder"></div></a></div></span><span class="flex gap-1 justify-center items-center"><span class="inline-block text-xs rounded p-1 font-mono font-bold transition-lively"><!--[--><time>2021/06/26</time><!--]--></span></span><!--[--><span class="flex gap-1 justify-center items-center"><span class="inline-block text-xs rounded p-1 font-mono font-bold transition-lively text-acc hover:bg-acc hover:text-bgd"><!--[--><a href="/categories/comp" class="">comp</a><!--]--></span></span><span class="flex gap-1 justify-center items-center"><!--[--><span class="inline-block text-xs rounded p-1 font-mono font-bold transition-lively text-sec hover:bg-sec hover:text-bgd"><!--[--><a href="/tags?tag=cpp" class=""> @cpp</a><!--]--></span><span class="inline-block text-xs rounded p-1 font-mono font-bold transition-lively text-sec hover:bg-sec hover:text-bgd"><!--[--><a href="/tags?tag=pl" class=""> @pl</a><!--]--></span><!--]--></span><span class="flex gap-1 justify-center items-center"><!--[--><!--]--></span><!--]--></div></header><div class="lg:sticky lg:top-4"><nav id="toc"><ul class="flex flex-col gap-1"><!--[--><!--]--></ul></nav></div><div m="b-8"></div><article id="md"><div><p>ç¨‹è®¾è¯¾çš„ C++ ç¬”è®°ã€‚ä¸ŠåŠå­¦æœŸæ˜¯è¯­æ³•åŠ STLï¼Œä¸‹åŠå­¦æœŸæ˜¯ç®—æ³•åŸºç¡€ã€‚</p><!-- more --><article note=""><h2 id="å‡½æ•°åŠå…¶ç±»å‹" tabindex="-1">å‡½æ•°åŠå…¶ç±»å‹</h2><h3 id="c-11-lambda-è¡¨è¾¾å¼ä½œä¸ºè¿”å›å€¼" tabindex="-1">C++ 11 lambda è¡¨è¾¾å¼ä½œä¸ºè¿”å›å€¼</h3><p>C++ æä¾›äº† <code>auto</code> å…³é”®å­—ä½œè‡ªåŠ¨ç±»å‹æ¨æ–­ï¼Œä½†åœ¨ C++ 11 ä¸­ä¸èƒ½è‡ªåŠ¨æ¨æ–­å‡½æ•°çš„è¿”å›å€¼ç±»å‹ï¼Œå¿…é¡»é€šè¿‡ <code>decltype()</code> æŒ‡æ˜ã€‚è€Œ lambda è¡¨è¾¾å¼æ²¡æœ‰å…·åç±»å‹ï¼Œå› æ­¤éœ€è¦é€šè¿‡åŒ…è£…åœ¨<strong>å‡½æ•°å¯¹è±¡</strong>ï¼ˆ<code>function</code>ï¼‰ä¸­æ¥è§£å†³ã€‚</p><pre class="shiki" style="background-color:#282c34"><code><span class="line"><span style="color:#c678dd">#include</span><span style="color:#abb2bf"> </span><span style="color:#98c379">&lt;functional&gt;</span><span style="color:#abb2bf"> </span><span style="color:#7f848e;font-style:italic">// `std::function` åœ¨ &lt;functional&gt; å¤´æ–‡ä»¶é‡Œ</span></span>
<span class="line"><span style="color:#c678dd">using</span><span style="color:#abb2bf"> </span><span style="color:#c678dd">namespace</span><span style="color:#abb2bf"> </span><span style="color:#e5c07b">std</span><span style="color:#abb2bf">;</span></span>
<span class="line"><span style="color:#e5c07b">function</span><span style="color:#abb2bf">&lt;</span><span style="color:#c678dd">int</span><span style="color:#abb2bf"> (</span><span style="color:#c678dd">int</span><span style="color:#abb2bf">)&gt; </span><span style="color:#61afef">foo</span><span style="color:#abb2bf">(</span><span style="color:#c678dd">int</span><span style="color:#abb2bf"> </span><span style="color:#e06c75;font-style:italic">a</span><span style="color:#abb2bf">) {</span></span>
<span class="line"><span style="color:#abb2bf">    </span><span style="color:#c678dd">return</span><span style="color:#abb2bf"> [</span><span style="color:#c678dd">=</span><span style="color:#abb2bf">](</span><span style="color:#c678dd">int</span><span style="color:#abb2bf"> </span><span style="color:#e06c75;font-style:italic">b</span><span style="color:#abb2bf">){ </span><span style="color:#c678dd">return</span><span style="color:#abb2bf"> a </span><span style="color:#c678dd">+</span><span style="color:#abb2bf"> b; };</span></span>
<span class="line"><span style="color:#abb2bf">}</span></span>
<span class="line"></span></code></pre><p><code>function&lt;&gt;</code> ç±»æ¨¡æ¿æ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œå‡½æ•°çš„ç±»å‹ã€‚ä»¿ç…§æ™®é€šå‡½æ•°çš„ç±»å‹ï¼ˆ<code>return_type(arg_type,...)</code>ï¼‰å†™å³å¯ã€‚</p><p>å½“ç„¶ï¼Œåœ¨ C++ 14 åŠä»¥åå¯ä»¥ç›´æ¥å†™æˆï¼š</p><pre class="shiki" style="background-color:#282c34"><code><span class="line"><span style="color:#c678dd">auto</span><span style="color:#abb2bf"> </span><span style="color:#61afef">foo</span><span style="color:#abb2bf">(</span><span style="color:#c678dd">int</span><span style="color:#abb2bf"> </span><span style="color:#e06c75;font-style:italic">a</span><span style="color:#abb2bf">) {</span></span>
<span class="line"><span style="color:#abb2bf">    </span><span style="color:#c678dd">return</span><span style="color:#abb2bf"> [</span><span style="color:#c678dd">=</span><span style="color:#abb2bf">](</span><span style="color:#c678dd">int</span><span style="color:#abb2bf"> </span><span style="color:#e06c75;font-style:italic">b</span><span style="color:#abb2bf">){ </span><span style="color:#c678dd">return</span><span style="color:#abb2bf"> a </span><span style="color:#c678dd">+</span><span style="color:#abb2bf"> b; };</span></span>
<span class="line"><span style="color:#abb2bf">}</span></span>
<span class="line"></span></code></pre><h3 id="å‡½æ•°æŒ‡é’ˆ" tabindex="-1">å‡½æ•°æŒ‡é’ˆ</h3><p>ä¸€ä¸ªå‚æ•°è¡¨æ˜¯ <code>(int, int)</code>ï¼Œè¿”å›å€¼æ˜¯ <code>void</code> çš„å‡½æ•°ï¼Œå®ƒçš„æŒ‡é’ˆç±»å‹å†™ä½œ <code>void(*)(int, int)</code>ã€‚å¦‚æœå‡½æ•°çš„å½¢å‚æ˜¯å‡½æ•°æŒ‡é’ˆç±»å‹ï¼Œéœ€è¦å†™æˆï¼š</p><pre class="shiki" style="background-color:#282c34"><code><span class="line"><span style="color:#c678dd">void</span><span style="color:#abb2bf"> </span><span style="color:#61afef">foo</span><span style="color:#abb2bf">(</span><span style="color:#c678dd">void</span><span style="color:#abb2bf">(*</span><span style="color:#e06c75;font-style:italic">fun</span><span style="color:#abb2bf">)(</span><span style="color:#c678dd">int</span><span style="color:#abb2bf">, </span><span style="color:#c678dd">int</span><span style="color:#abb2bf">)) {}</span><span style="color:#7f848e;font-style:italic"> // &lt;- å½¢å‚å fun åœ¨ç±»å‹çš„é‡Œé¢ï¼</span></span>
<span class="line"></span></code></pre><p>å½“ç„¶ï¼Œå¯ä»¥ä½¿ç”¨å‡½æ•°æ¨¡æ¿ï¼š</p><pre class="shiki" style="background-color:#282c34"><code><span class="line"><span style="color:#c678dd">template</span><span style="color:#abb2bf">&lt;</span><span style="color:#c678dd">class</span><span style="color:#abb2bf"> </span><span style="color:#e5c07b">F</span><span style="color:#abb2bf">&gt;</span></span>
<span class="line"><span style="color:#c678dd">void</span><span style="color:#abb2bf"> </span><span style="color:#61afef">foo</span><span style="color:#abb2bf">(</span><span style="color:#e5c07b">F</span><span style="color:#abb2bf"> </span><span style="color:#e06c75;font-style:italic">fun</span><span style="color:#abb2bf">) {}</span></span>
<span class="line"></span></code></pre></article><hr class="talk-separator"><article note=""><h2 id="æ„é€ å‡½æ•°" tabindex="-1">æ„é€ å‡½æ•°</h2><h3 id="å¤åˆ¶æ„é€ å‡½æ•°" tabindex="-1">å¤åˆ¶æ„é€ å‡½æ•°</h3><p>å½¢å¦‚ <code>C(const C&amp; a)</code> çš„æ„é€ å‡½æ•°ã€‚åœ¨æ²¡æœ‰å£°æ˜çš„æƒ…å†µä¸‹ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªï¼Œæ‰§è¡ŒæŒ‰ä½æ‹·è´ï¼ˆ<strong>æµ…æ‹·è´</strong>ï¼‰ã€‚åœ¨ä»¥ä¸‹ä¸‰ç§æƒ…å†µä¼šè°ƒç”¨ï¼š</p><ul><li>ä½¿ç”¨å¦ä¸€ä¸ªåŒç±»å¯¹è±¡åˆå§‹åŒ–</li><li>åˆå§‹åŒ–å‡½æ•°çš„å½¢å‚</li><li>å‡½æ•°ä»¥å€¼çš„å½¢å¼è¿”å›å¯¹è±¡*</li></ul><p>C++ 17 åŠä»¥ä¸Šè¦æ±‚å®ç°è¿”å›å€¼ä¼˜åŒ–ï¼Œå¦‚æœè¿”å›å€¼æ˜¯çº¯å³å€¼ï¼ˆä¸€ä¸ªç›´æ¥è°ƒç”¨æ„é€ å‡½æ•°ç”Ÿæˆçš„ä¸´æ—¶å¯¹è±¡ï¼‰ï¼Œä¸ä¼šæ‰§è¡Œå¤åˆ¶æ„é€ å‡½æ•°ã€‚æ­¤å¤–è¿˜æœ‰å…·åè¿”å›å€¼ä¼˜åŒ–ï¼Œå¯ä»¥å‚è€ƒ<a href="https://www.zhihu.com/question/443571654/answer/1723219351" target="_blank" rel="noopener">è°·é›¨åŒå­¦çš„çŸ¥ä¹å›ç­”</a>ã€‚</p><p>ä»¥ä¸Šæ“ä½œçš„ç‰¹ç‚¹æ˜¯ï¼Œéƒ½å‘ç”Ÿäº†â€œåœ¨å†…å­˜ä¸­<strong>å¼€è¾Ÿäº†ä¸€å—æ–°çš„ç©ºé—´</strong>ï¼Œéœ€è¦ç”¨ä¸€ä¸ªåŒç±»å¯¹è±¡åˆå§‹åŒ–å®ƒâ€çš„äº‹ä»¶ï¼Œè€Œåœ¨<strong>èµ‹å€¼</strong>æ“ä½œä¸­ï¼Œèµ‹å€¼å·å·¦ä¾§çš„å·¦å€¼<strong>å¹¶ä¸æ˜¯ä¸€å—æ–°çš„ç©ºé—´</strong>ï¼Œå› æ­¤å¹¶ä¸è°ƒç”¨å¤åˆ¶æ„é€ å‡½æ•°ã€‚å¦ä¸€ç§ç†è§£æ˜¯ï¼Œ<em>èµ‹å€¼æ“ä½œè¿‡ç¨‹ä¸­ä¸æ¶‰åŠåˆå§‹åŒ–</em> â€”â€”è€Œæ„é€ å‡½æ•°æœ¬è´¨ä¸Šéƒ½æ˜¯åœ¨åšåˆå§‹åŒ–æ“ä½œã€‚</p><h3 id="ææ„å‡½æ•°" tabindex="-1">ææ„å‡½æ•°</h3><p>é€šå¸¸æƒ…å†µä¸‹ï¼ˆæ¯”å¦‚ï¼Œæ’é™¤ <code>new</code> åˆ†é…çš„ç©ºé—´æ²¡æœ‰ç”¨ <code>delete</code> é‡Šæ”¾çš„æƒ…å†µï¼‰ï¼Œæ¯æ¬¡è°ƒç”¨æ„é€ å‡½æ•°ï¼Œåœ¨å°†æ¥çš„æŸä¸ªæ—¶é—´ç‚¹éƒ½ä¼šå‘ç”Ÿä¸€æ¬¡å¯¹åº”çš„ææ„ã€‚æ³¨æ„ï¼Œè¿™é‡Œçš„æ„é€ å‡½æ•°åŒ…æ‹¬<strong>æ‰€æœ‰ç§ç±»çš„æ„é€ å‡½æ•°</strong>ï¼šæ— å‚æ„é€ å‡½æ•°ã€ç±»å‹è½¬æ¢æ„é€ å‡½æ•°ã€å¤åˆ¶æ„é€ å‡½æ•°ã€ç§»åŠ¨æ„é€ å‡½æ•°ç­‰ã€‚</p><pre class="shiki" style="background-color:#282c34"><code><span class="line"><span style="color:#c678dd">#include</span><span style="color:#abb2bf"> </span><span style="color:#98c379">&lt;iostream&gt;</span></span>
<span class="line"><span style="color:#c678dd">using</span><span style="color:#abb2bf"> </span><span style="color:#c678dd">namespace</span><span style="color:#abb2bf"> </span><span style="color:#e5c07b">std</span><span style="color:#abb2bf">;</span></span>
<span class="line"><span style="color:#c678dd">class</span><span style="color:#abb2bf"> </span><span style="color:#e5c07b">A</span><span style="color:#abb2bf"> {</span></span>
<span class="line"><span style="color:#c678dd">public:</span></span>
<span class="line"><span style="color:#abb2bf">    </span><span style="color:#c678dd">int</span><span style="color:#abb2bf"> n;</span></span>
<span class="line"><span style="color:#abb2bf">    </span><span style="color:#61afef">A</span><span style="color:#abb2bf">(</span><span style="color:#c678dd">const</span><span style="color:#abb2bf"> </span><span style="color:#c678dd">int</span><span style="color:#abb2bf"> </span><span style="color:#e06c75;font-style:italic">a</span><span style="color:#abb2bf">): </span><span style="color:#61afef">n</span><span style="color:#abb2bf">(a) {</span></span>
<span class="line"><span style="color:#abb2bf">        cout</span><span style="color:#c678dd">&lt;&lt;</span><span style="color:#98c379">"int, "</span><span style="color:#c678dd">&lt;&lt;</span><span style="color:#abb2bf">n</span><span style="color:#c678dd">&lt;&lt;</span><span style="color:#98c379">", @"</span><span style="color:#c678dd">&lt;&lt;</span><span style="color:#e5c07b">this</span><span style="color:#c678dd">&lt;&lt;</span><span style="color:#abb2bf">endl;</span></span>
<span class="line"><span style="color:#abb2bf">    }</span></span>
<span class="line"><span style="color:#abb2bf">    </span><span style="color:#61afef">A</span><span style="color:#abb2bf">(</span><span style="color:#c678dd">const</span><span style="color:#abb2bf"> </span><span style="color:#e5c07b">A</span><span style="color:#c678dd">&amp;</span><span style="color:#abb2bf"> </span><span style="color:#e06c75;font-style:italic">a</span><span style="color:#abb2bf">) {</span></span>
<span class="line"><span style="color:#abb2bf">        cout</span><span style="color:#c678dd">&lt;&lt;</span><span style="color:#98c379">"&amp;,&lt;-"</span><span style="color:#c678dd">&lt;&lt;</span><span style="color:#e5c07b">a</span><span style="color:#abb2bf">.</span><span style="color:#e06c75">n</span><span style="color:#c678dd">&lt;&lt;</span><span style="color:#98c379">",-&gt;@"</span><span style="color:#c678dd">&lt;&lt;</span><span style="color:#e5c07b">this</span><span style="color:#c678dd">&lt;&lt;</span><span style="color:#abb2bf">endl;</span></span>
<span class="line"><span style="color:#abb2bf">        n</span><span style="color:#c678dd">=</span><span style="color:#e5c07b">a</span><span style="color:#abb2bf">.</span><span style="color:#e06c75">n</span><span style="color:#abb2bf">;</span></span>
<span class="line"><span style="color:#abb2bf">    }</span></span>
<span class="line"><span style="color:#abb2bf">    </span><span style="color:#61afef">~A</span><span style="color:#abb2bf">(){ cout</span><span style="color:#c678dd">&lt;&lt;</span><span style="color:#98c379">"~, "</span><span style="color:#c678dd">&lt;&lt;</span><span style="color:#abb2bf">n</span><span style="color:#c678dd">&lt;&lt;</span><span style="color:#98c379">", @"</span><span style="color:#c678dd">&lt;&lt;</span><span style="color:#e5c07b">this</span><span style="color:#c678dd">&lt;&lt;</span><span style="color:#abb2bf">endl; }</span></span>
<span class="line"><span style="color:#abb2bf">    </span><span style="color:#e5c07b">A</span><span style="color:#c678dd">&amp;</span><span style="color:#abb2bf"> </span><span style="color:#c678dd">operator</span><span style="color:#abb2bf">=(</span><span style="color:#c678dd">const</span><span style="color:#abb2bf"> </span><span style="color:#e5c07b">A</span><span style="color:#c678dd">&amp;</span><span style="color:#abb2bf"> </span><span style="color:#e06c75;font-style:italic">a</span><span style="color:#abb2bf">) {</span></span>
<span class="line"><span style="color:#abb2bf">        cout</span><span style="color:#c678dd">&lt;&lt;</span><span style="color:#98c379">"=, "</span><span style="color:#c678dd">&lt;&lt;</span><span style="color:#abb2bf">n</span><span style="color:#c678dd">&lt;&lt;</span><span style="color:#98c379">" &lt;- "</span><span style="color:#c678dd">&lt;&lt;</span><span style="color:#e5c07b">a</span><span style="color:#abb2bf">.</span><span style="color:#e06c75">n</span><span style="color:#c678dd">&lt;&lt;</span><span style="color:#98c379">", -&gt;@"</span><span style="color:#c678dd">&lt;&lt;</span><span style="color:#e5c07b">this</span><span style="color:#c678dd">&lt;&lt;</span><span style="color:#abb2bf">endl;</span></span>
<span class="line"><span style="color:#abb2bf">        n </span><span style="color:#c678dd">=</span><span style="color:#abb2bf"> </span><span style="color:#e5c07b">a</span><span style="color:#abb2bf">.</span><span style="color:#e06c75">n</span><span style="color:#abb2bf">;</span></span>
<span class="line"><span style="color:#abb2bf">        </span><span style="color:#c678dd">return</span><span style="color:#abb2bf"> </span><span style="color:#c678dd">*</span><span style="color:#e5c07b">this</span><span style="color:#abb2bf">;</span></span>
<span class="line"><span style="color:#abb2bf">    }</span></span>
<span class="line"><span style="color:#abb2bf">};</span></span>
<span class="line"><span style="color:#c678dd">int</span><span style="color:#abb2bf"> </span><span style="color:#61afef">main</span><span style="color:#abb2bf">(){</span></span>
<span class="line"><span style="color:#abb2bf">    A a{</span><span style="color:#d19a66">12</span><span style="color:#abb2bf">};</span></span>
<span class="line"><span style="color:#abb2bf">    cout</span><span style="color:#c678dd">&lt;&lt;</span><span style="color:#98c379">"--1--"</span><span style="color:#c678dd">&lt;&lt;</span><span style="color:#abb2bf">endl;</span></span>
<span class="line"><span style="color:#abb2bf">    a </span><span style="color:#c678dd">=</span><span style="color:#abb2bf"> </span><span style="color:#d19a66">9</span><span style="color:#abb2bf">;</span></span>
<span class="line"><span style="color:#abb2bf">    cout</span><span style="color:#c678dd">&lt;&lt;</span><span style="color:#98c379">"--2--"</span><span style="color:#c678dd">&lt;&lt;</span><span style="color:#abb2bf">endl;</span></span>
<span class="line"><span style="color:#abb2bf">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7f848e;font-style:italic">/*</span></span>
<span class="line"><span style="color:#7f848e;font-style:italic">int, 12, @0x64fe08 // ç±»å‹è½¬æ¢æ„é€ å‡½æ•°</span></span>
<span class="line"><span style="color:#7f848e;font-style:italic">--1--</span></span>
<span class="line"><span style="color:#7f848e;font-style:italic">int, 9, @0x64fe0c // éšå¼ç±»å‹è½¬æ¢</span></span>
<span class="line"><span style="color:#7f848e;font-style:italic">=, 12 &lt;- 9, @0x64fe08 // èµ‹å€¼</span></span>
<span class="line"><span style="color:#7f848e;font-style:italic">~, 9, @0x64fe0c // ä¸´æ—¶å¯¹è±¡ææ„</span></span>
<span class="line"><span style="color:#7f848e;font-style:italic">--2--</span></span>
<span class="line"><span style="color:#7f848e;font-style:italic">~, 9, @0x64fe08 // a ææ„</span></span>
<span class="line"><span style="color:#7f848e;font-style:italic">*/</span></span>
<span class="line"></span></code></pre></article><hr class="talk-separator"><article note=""><h2 id="ç§»åŠ¨" tabindex="-1">ç§»åŠ¨</h2><p>å¤åˆ¶æ„é€ å‡½æ•°ä¸­æ‰§è¡Œå¼€é”€æå¤§çš„æ·±æ‹·è´æ“ä½œï¼Œè€Œæœ‰æ—¶æˆ‘ä»¬åªæ˜¯æƒ³æŠŠå€¼ä»å˜é‡ä¼ åˆ°å¦å¤–ä¸€ä¸ªå˜é‡ï¼Œä¹‹å<strong>ä¸¢å¼ƒ</strong>åŸå˜é‡ï¼Œè¿™æ—¶ä¸å¿…è¿›è¡Œæ‹·è´ï¼Œå¯ä»¥ä½¿ç”¨<strong>ç§»åŠ¨</strong>æ“ä½œã€‚</p><pre class="shiki" style="background-color:#282c34"><code><span class="line"><span style="color:#abb2bf">vector</span><span style="color:#c678dd">&lt;int&gt;</span><span style="color:#abb2bf"> a{</span><span style="color:#d19a66">1</span><span style="color:#abb2bf">};</span></span>
<span class="line"><span style="color:#abb2bf">vector</span><span style="color:#c678dd">&lt;int&gt;</span><span style="color:#abb2bf"> b{</span><span style="color:#e5c07b">std</span><span style="color:#abb2bf">::</span><span style="color:#61afef">move</span><span style="color:#abb2bf">(a)};</span></span>
<span class="line"></span></code></pre><p><code>std::move()</code> æ ‡æ³¨è¯¥å·¦å€¼ä¸ºâ€œå¯ç§»åŠ¨çš„â€ï¼Œå³<em>äº¡å€¼</em> ï¼ˆå¯ä»¥ç†è§£ä¸ºä¸§å¤±å…¶å€¼çš„æ‰€æœ‰æƒï¼‰ã€‚äº¡å€¼ä¼šä¼˜å…ˆç»‘å®šåˆ°å³å€¼å¼•ç”¨ç±»å‹ä¸Šï¼Œå› æ­¤ä¼šä¼˜å…ˆè°ƒç”¨<strong>ç§»åŠ¨æ„é€ å‡½æ•°</strong>å’Œ<strong>ç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦</strong>ã€‚</p><p><code>std::move()</code> æœ¬è´¨ä¸Šåªæ˜¯ç±»å‹è½¬æ¢ï¼Œè¡¨ç¤ºå¯ä»¥è¿›è¡Œç§»åŠ¨æ“ä½œï¼Œ<strong>ä¸ä¸€å®šå®é™…ç§»åŠ¨äº†</strong>ï¼ˆå®é™…ç§»åŠ¨æ“ä½œåœ¨æ„é€ å‡½æ•°å’Œè¿ç®—ç¬¦é‡è½½ä¸­è¿›è¡Œï¼‰ã€‚ä¹‹åè¯¥å·¦å€¼æ˜¯<strong>åˆæ³•</strong>ä½†<strong>æœªå®šä¹‰</strong>çš„ã€‚</p><p>ç§»åŠ¨æ„é€ å‡½æ•°å’Œç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦çš„å‚æ•°æ˜¯å³å€¼å¼•ç”¨ç±»å‹ï¼ˆ<code>T&amp;&amp;</code>ï¼‰ï¼Œæ³¨æ„æ²¡æœ‰ <code>const</code> ä¿®é¥°ç¬¦ï¼Œå› ä¸ºç§»åŠ¨æ“ä½œä¼šä¿®æ”¹å³å€¼å¼•ç”¨ã€‚</p><p>ä¸¾ä¾‹æ¥è¯´ï¼Œåœ¨ç±»åˆå§‹åŒ–åˆ—è¡¨ä¸­åˆå§‹åŒ–æˆå‘˜å¯¹è±¡æ—¶ï¼Œä½¿ç”¨ <code>std::move</code> ç§»åŠ¨å½¢å‚å¯¹è±¡å¯ä»¥å‡å°‘å¼€é”€ã€‚</p></article><hr class="talk-separator"><article note=""><h2 id="å†…è”å‡½æ•°" tabindex="-1">å†…è”å‡½æ•°</h2><p>æ— è®ºæ˜¯æ˜¾å¼å£°æ˜ <code>inline</code> è¿˜æ˜¯éšå¼ï¼ˆæˆå‘˜å‡½æ•°å‡½æ•°ä½“ç›´æ¥å†™åœ¨ç±»å®šä¹‰å†…ï¼‰ï¼Œç¼–è¯‘å™¨éƒ½<strong>ä¸ä¸€å®šå°†å…¶å†…è”</strong>ã€‚ç»è¯•éªŒï¼Œ<code>gcc</code> åœ¨ <code>-O0</code> ä¸‹ <em>ä¼¼ä¹</em> ä¸ä¼šæ‰§è¡Œå†…è”ï¼Œè€Œåœ¨ <code>-O1</code> ä¸‹åˆ™ <em>ä¼¼ä¹</em> ä¼šâ€”â€”æ–­ç‚¹è°ƒè¯•å™¨ä¸­æ‰¾ä¸åˆ°æ˜¾ç¤ºæˆ–éšå¼å‡½æ•°äº†ã€‚<s>æ‰€ä»¥å†…è”å°±æ˜¯å®‰æ…°å‰‚</s>ã€‚</p><p>æˆå‘˜å‡½æ•°å³ä½¿å†…è”ï¼Œä¹Ÿ<strong>ä¸ä¼šè®¡å…¥å®ä¾‹åŒ–çš„å¯¹è±¡çš„å­˜å‚¨ç©ºé—´</strong>ã€‚</p></article><hr class="talk-separator"><article note=""><h2 id="è¾“å…¥è¾“å‡ºæµ" tabindex="-1">è¾“å…¥è¾“å‡ºæµ</h2><h3 id="cstdio-è¿˜æ˜¯-iostream" tabindex="-1"><code>&lt;cstdio&gt;</code> è¿˜æ˜¯ <code>&lt;iostream&gt;</code> ï¼Ÿ</h3><p><code>scanf</code> å’Œ <code>printf</code> è™½ç„¶æ€§èƒ½å¥½ï¼Œä½†æ¯•ç«Ÿæ˜¯ C åº“å‡½æ•°ï¼Œæœ‰å‡ å¤„å’Œ C++ ä¹ æƒ¯ä¸ç¬¦ï¼š</p><ol><li><code>scanf</code> é€šè¿‡<strong>æŒ‡é’ˆ</strong>è¿›è¡Œå†™å…¥ï¼Œå¿˜è®°å–åœ°å€ç¬¦ <code>&amp;</code> ä¼šå˜å¾—ä¸å¹¸ğŸ˜…ã€‚</li><li>è¿™ä¸¤ä¸ªå‡½æ•°å¹¶ä¸æ”¯æŒ <code>string</code>ï¼ˆ<code>string</code> å¹¶æ²¡å®šä¹‰åˆ° <code>char*</code> çš„éšå¼ç±»å‹è½¬æ¢ï¼‰ï¼Œéœ€è¦æ‰‹åŠ¨è°ƒç”¨ <code>.c_str()</code>ã€‚</li><li><code>scanf("%c",...)</code> ä¼šæŠŠ<strong>ç©ºç™½å­—ç¬¦</strong>è¯»å…¥ <code>char</code>ï¼Œè€Œ <code>cin</code> ä¼šè·³è¿‡æ‰€æœ‰ç©ºç™½å­—ç¬¦ã€‚å¦‚æœç¼“å†²åŒºé‡Œè¿˜ç•™ç€ä¸Šä¸€è¡Œçš„æ¢è¡Œç¬¦ï¼Œå®ƒä¼šè¢«è¯»å…¥ <code>char</code>ã€‚å¯ä»¥ä½¿ç”¨ <code>" %c"</code> ï¼Œè·³è¿‡ç¼“å†²åŒºé‡Œ<strong>æ‰€æœ‰ç©ºç™½å­—ç¬¦</strong>ã€‚</li></ol><p>è¾“å…¥æ•°æ®é‡ç‰¹åˆ«å¤§çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥è€ƒè™‘ç”¨ <code>scanf</code>ã€‚è€Œ <code>cin</code> æ…¢ä¸å®ƒå’Œ <code>scanf</code> åŒæ­¥ç¼“å†²åŒºæœ‰å…³ï¼Œå¯ä»¥ä½¿ç”¨ (<code>std::</code>)<code>ios::sync_with_stdio(false)</code> å…³é—­ï¼Œä¹‹åæ€§èƒ½å’Œ <code>scanf</code> å·®ä¸å¤šï¼Œä½†<strong>ä¸å†æ”¯æŒä¸¤ä¸ªå‡½æ•°æ··ç”¨</strong>ã€‚</p><p><code>cin</code> è¿˜æœ‰ä¸€ä¸ªå‘ï¼Œè¯»å–ä¹‹åï¼Œåæ¥çš„<strong>ç©ºç™½å­—ç¬¦ç•™åœ¨ç¼“å†²åŒº</strong>é‡Œï¼ŒåŒ…æ‹¬<code>cin.getline()</code>ã€‚è¿™æ—¶å€™å†ç”¨ <code>scanf</code> å°±å¯èƒ½å‡ºç°æ··ä¹±ã€‚</p><p>å¦å¤–ï¼Œ<code>&lt;cstdio&gt;</code> è¯»å…¥ä¸€ä¸ªå­—ç¬¦çš„å‡½æ•°æ˜¯ <code>getchar()</code>ï¼Œè€Œ <code>&lt;iostream&gt;</code> æ˜¯ <code>cin.get()</code>ï¼Œä¸¢å¼ƒå­—ç¬¦å¯ä»¥ç›´æ¥ä½¿ç”¨ <code>cin.ignore()</code>ã€‚</p><h3 id="æ ¼å¼åŒ–" tabindex="-1">æ ¼å¼åŒ–</h3><p><code>printf</code> ç”¨æ¥ä¿ç•™ä¸‰ä½å°æ•°çš„è¯­æ³•æ˜¯ <code>"%.3f"</code>ï¼Œè€Œ <code>cout</code> éœ€è¦ç”¨ <code>&lt;iomanip&gt;</code> åº“ï¼š</p><pre class="shiki" style="background-color:#282c34"><code><span class="line"><span style="color:#abb2bf">cout </span><span style="color:#c678dd">&lt;&lt;</span><span style="color:#abb2bf"> </span><span style="color:#61afef">setiosflags</span><span style="color:#abb2bf">(ios::fixed) </span><span style="color:#c678dd">&lt;&lt;</span><span style="color:#abb2bf"> </span><span style="color:#61afef">setprecision</span><span style="color:#abb2bf">(</span><span style="color:#d19a66">3</span><span style="color:#abb2bf">) </span><span style="color:#c678dd">&lt;&lt;</span><span style="color:#abb2bf"> MY_DOUBLE </span><span style="color:#c678dd">&lt;&lt;</span><span style="color:#abb2bf"> </span><span style="color:#61afef">resetiosflags</span><span style="color:#abb2bf">(ios::fixed) </span><span style="color:#c678dd">&lt;&lt;</span><span style="color:#abb2bf"> endl;</span></span>
<span class="line"></span></code></pre><p>è¾“å‡ºåå…­è¿›åˆ¶å¯ä»¥ä½¿ç”¨ <code>%x</code> æˆ–è€… <code>cout &lt;&lt; hex &lt;&lt; MY_INT</code>ã€‚</p></article></div></article></article></main></main><!----><!--]--></div><script>window.__INITIAL_STATE__='{"pinia":{}}'</script><script>!function(){var t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,a=localStorage.getItem("color-scheme")||"auto",t=(document.documentElement.className="dark"===a||t&&"light"!==a?"dark":"",localStorage.getItem("typesetting::accent_color"));if(t){a=JSON.parse(t),t=Object.entries(a).map(e=>`--accent-${e[0]}: ${e[1]};`).join("\n");let e=document.createElement("style");e.type="text/css",e.innerText=`:root{${t}}`,document.head.appendChild(e)}}()</script><link rel="stylesheet" href="/assets/app.bdde22dc.css"><link rel="stylesheet" href="/assets/TheArticle.080d4a8a.css"></body></html>