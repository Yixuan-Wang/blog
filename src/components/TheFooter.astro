---
import BaseHover from "./BaseHover.astro";
import TheFooterBuildInfo from "./TheFooterBuildInfo.astro";
import TheFooterColorSchemeButton from "./TheFooterColorSchemeButton.svelte";
import TheFooterCommentButton from "./TheFooterCommentButton.astro";

export interface Props {
  noFab?: boolean
  noComments?: boolean
  hasScrollToTop?: boolean
}

const { noComments, hasScrollToTop, noFab } = Astro.props;
---

<footer id="the-footer">
  <nav id="the-footer-start" class="gap-2">
    <BaseHover>
      <button slot="handle" title="Am">
        <a
          href="https://am.yixuan-wang.site"
          rel="noopener"
          target="_blank"
          title="Am"
        >
          <div class="i-mdi-information" />
        </a>
      </button>
      <div slot="content" class="tip">Am</div>
    </BaseHover>
    <BaseHover>
      <button slot="handle" title="GitHub">
        <a
          href="https://github.com/Yixuan-Wang"
          rel="noopener"
          target="_blank"
          title="GitHub"
        >
          <div class="i-mdi-github" />
        </a>
      </button>
      <div slot="content" class="tip">GitHub</div>
    </BaseHover>
    <BaseHover>
      <button slot="handle" title="RSS">
        <a
          href={new URL(`${import.meta.env.BASE_URL}feed.xml`, Astro.site)}
          rel="noopener"
          target="_blank"
          title="RSS"
        >
          <div class="i-mdi-rss-box" />
        </a>
      </button>
      <div slot="content" class="tip">RSS</div>
    </BaseHover>
    <TheFooterBuildInfo />
  </nav>
  <div class="flex-1"></div>
  <nav id="the-footer-end" class="gap-2">
    <BaseHover>
      <TheFooterColorSchemeButton slot="handle" client:only="svelte" />
      <div slot="content" class="tip">Color Scheme</div>
    </BaseHover>
  </nav>
</footer>
<footer id="the-fab" class="gap-2" data-fab={!noFab}>
  {noComments ? null : 
    <BaseHover>
      <TheFooterCommentButton slot="handle" />
      <div slot="content" class="tip">Comments</div>
    </BaseHover>
  }
  {!hasScrollToTop ? null :
    <BaseHover>
      <button slot="handle" title="Back to top" onclick="window.scrollTo({ top: 0, behavior: 'smooth' })" aria-label="Back to top">
        <div class="i-mdi-arrow-up-circle"></div>
      </button>
      <div slot="content" class="tip">Back to Top</div>
    </BaseHover>
  }
</footer>

<style is:global>
  :is(#the-footer, #the-fab) button {
    @apply text-lg
    @hover-text-one active:text-one transition-lively;
  }

  #the-fab button {
    @apply text-one-front;
  }

  :is(#the-footer, #the-fab) button[pinned] {
    @apply text-one;
  }

  #the-footer-start .hover-component-container {
    @apply justify-start lg:justify-center;
  }

  :is(#the-footer-end, #the-fab) .hover-component-container {
    @apply justify-end lg:justify-center;
  }

  #the-fab {
    &[data-fab="true"] {
      @apply sticky bottom-0;
    }

    & > * {
      @apply z-9;
    }

    &:has(> *) {
      @apply ml-2;
    }

  }

  /* @media (min-width: 1024px) {
    #the-fab {
      @apply fixed bottom-0 right-1;

      .hover-component-container {
        @apply justify-end;
      }
    }
  } */
</style>
